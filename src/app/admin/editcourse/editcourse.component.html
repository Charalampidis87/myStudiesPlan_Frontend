<!DOCTYPE html>
<html lang="en">
<head>
  <title>editcourse</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <a routerLink="/admin" class="navbar-brand" href="#"><img src="../../assets/img/logoOrange.png" width="50" height="35"></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item nav-link active" routerLink="/admin">Μαθήματα</li>
      <li class="nav-item nav-link" routerLink="/user">Χρήστες</li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item nav-link"><span class="fa fa-user-circle"></span> Διαχειριστής</li>
      <li class="nav-item nav-link" routerLink="/" (click)="logout()"><span class="fa fa-sign-out"></span> Αποσύνδεση</li>
    </ul>
  </div>
</nav>

<button class="btn btn-secondary" routerLink="/admin"><i class="fa fa-arrow-left"> Επιστροφή</i></button>
<div class="container" style="margin-top: 30px;">
  <div class="row">
    <div class="col-sm-12">
      <h1>Επεξεργασία Μαθήματος</h1>
    </div>
  </div>
  <hr>
  <form>
    <div class="form-group row">
      <label for="editName" class="col-sm-2 col-form-label">Όνομα Μαθήματος</label>
      <div class="col-sm-9">
        <input type="text" required [(ngModel)]="this.selectedCourse.name" [ngModelOptions]="{standalone: true}" class="form-control" id="editName" autocomplete="off" value="{{this.selectedCourse.name}}">
      </div>
    </div>
    <div class="form-group row">
      <label for="editCode" class="col-sm-2 col-form-label">Κωδικός Μαθήματος</label>
      <div class="col-sm-9">
        <input type="text" required [(ngModel)]="this.selectedCourse.code" [ngModelOptions]="{standalone: true}" class="form-control small-input" id="editCode" autocomplete="off" value="{{this.selectedCourse.code}}">
      </div>
    </div>
    <div class="form-group row">
      <label for="editEcts" class="col-sm-2 col-form-label">ECTS</label>
      <div class="col-sm-2">
        <input type="number" required [(ngModel)]="this.selectedCourse.ects" [ngModelOptions]="{standalone: true}" class="form-control small-input" id="editEcts" autocomplete="off" value="{{this.selectedCourse.ects}}">
      </div>

    </div>
    <div class="form-group row">
      <label for="editSemester" class="col-sm-2 col-form-label">Εξάμηνο</label>
      <div class="col-sm-9">
        <input type="number" min="1" max="8" required [(ngModel)]="this.selectedCourse.semester" [ngModelOptions]="{standalone: true}" class="form-control small-input" id="editSemester" autocomplete="off" value="{{this.selectedCourse.semester}}">
      </div>
    </div>
    <div class="form-group row">
      <label for="editType" class="col-sm-2 col-form-label">Τύπος Μαθήματος</label>
      <div class="col-sm-9">
        <select name="editType" class="form-control" id="editType" required [(ngModel)]="this.selectedCourse.type" [ngModelOptions]="{standalone: true}" value="{{this.selectedCourse.type}}">
          <option value="ΥΜ">Υποχρεωτικό Μάθημα (ΥΜ)</option>
          <option value="ΕΡ">Αυτοτελές Προαιρετικό Εργαστήριο (ΕΡ)</option>
          <option value="ΕΥΜ">Κατ' Επιλογή Υποχρεωτικό Μάθημα (ΕΥΜ)</option>
          <option value="Project">Project</option>
          <option value="ΓΠ">Μάθημα Γενικής Παιδείας (ΓΠ)</option>
          <option value="ΠΜ">Προαιρετικό Μάθημα (ΠΜ)</option>
          <option value="ΠΕ">Πτυχιακή Εργασία (ΠΕ)</option>
          <option value="ΠΑ">Πρακτική Άσκηση (ΠΑ)</option>
          <option value="ΕΛ">Ελεύθερο Μάθημα (ΕΛ)</option>
        </select>
      </div>
    </div>
    <div class="form-group row">
      <label for="editDirection" class="col-sm-2 col-form-label">Κατεύθυνση</label>
      <div class="col-sm-9">
        <select name="editDirection" class="form-control" id="editDirection" required [(ngModel)]="this.selectedCourse.direction" [ngModelOptions]="{standalone: true}" value="{{this.selectedCourse.direction}}">
          <option value="Α">Α</option>
          <option value="Β">Β</option>
          <option value="ΑΒ">Α και Β</option>
        </select>
      </div>
    </div>
    <div class="form-group row" *ngFor="let i of [1,2,3,4,5,6]">
      <label class="col-sm-2 col-form-label">Ειδίκευση {{i}}</label>
      <div class="col-sm-9">
        <select name="specialization1" required class="form-control" [(ngModel)]="this.editSpecialization[i]" [ngModelOptions]="{standalone: true}" value="{{this.editSpecialization[i]}}">

          <option value="Υποχρεωτικό">Υποχρεωτικό</option>
          <option value="Βασικό" >Βασικό</option>
          <option value="Επιλογής">Επιλογής</option>
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for="editTheory" class="col-sm-2 col-form-label">Ώρες Θεωρίας</label>
      <div class="col-sm-9">
        <input type="text" required [(ngModel)]="this.selectedCourse.theory" [ngModelOptions]="{standalone: true}" class="form-control  small-input" id="editTheory" autocomplete="off" value="{{this.selectedCourse.theory}}">
      </div>
    </div>
    <div class="form-group row">
      <label for="editExtra" class="col-sm-2 col-form-label">Ώρες Φροντιστηρίου</label>
      <div class="col-sm-9">
        <input type="text" required [(ngModel)]="this.selectedCourse.extra" [ngModelOptions]="{standalone: true}" class="form-control  small-input" id="editExtra" autocomplete="off" value="{{this.selectedCourse.extra}}">
      </div>
    </div>
    <div class="form-group row">
      <label for="editLab" class="col-sm-2 col-form-label">Ώρες Εργαστηρίου</label>
      <div class="col-sm-9">
        <input type="text" required [(ngModel)]="this.selectedCourse.lab" [ngModelOptions]="{standalone: true}" class="form-control  small-input" id="editLab" autocomplete="off" value="{{this.selectedCourse.lab}}">
      </div>
    </div>
    <div>
      <h5 style="text-align: center; text-decoration: underline">Καθηγητές/τριες</h5>
      <div *ngFor="let professor of this.editProfessors let i=index">
        <div>
          <div class="form-group row">
            <label for="editProfessor" class="col-sm-2 col-form-label">Καθηγητής/τρια {{i+1}}</label>
            <div class="col-sm-9">
              <input type="text" required [(ngModel)]="this.editProfessors[i].professor" [ngModelOptions]="{standalone: true}" class="form-control" id="editProfessor" autocomplete="off" value="{{this.selectedCourse.professor[i]}}">
            </div>
            <div class="col-sm-1">
              <button type="button" class="btn btn-danger btn-circle" *ngIf="this.editProfessors.length > 1"
                      (click)="removeEditProfessor(i)"><i class="fa fa-times"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-sm-offset-2 col-sm-10">
          <div class="pull-left">
            <button class="btn btn-success" (click)="addEditProfessor()"><i class="fa fa-plus-circle"></i> Προσθήκη</button>
          </div>
        </div>
      </div>
    </div>

    <div>
      <h5 style="text-align: center; text-decoration: underline">Καθηγητές/τριες Εργαστηρίου</h5>
      <div *ngFor="let labProfessor of this.editLabProfessors let i=index">
        <div>
          <div class="form-group row">
            <label for="editLabProfessor" class="col-sm-2 col-form-label">Καθηγητής/τρια {{i+1}}</label>
            <div class="col-sm-9">
              <input type="text" required [(ngModel)]="this.editLabProfessors[i].labProfessor" [ngModelOptions]="{standalone: true}" class="form-control" id="editLabProfessor" autocomplete="off" value="{{this.selectedCourse.labProfessor[i]}}">
            </div>
            <div class="col-sm-1">
              <button type="button" class="btn btn-danger btn-circle" *ngIf="this.editLabProfessors.length > 1"
                      (click)="removeEditLabProfessor(i)"><i class="fa fa-times"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-sm-offset-2 col-sm-10">
          <div class="pull-left">
            <button class="btn btn-success" (click)="addEditLabProfessor()"><i class="fa fa-plus-circle"></i> Προσθήκη</button>
          </div>
        </div>
      </div>
    </div>

    <div>
      <h5 style="text-align: center; text-decoration: underline">Προαπαιτουμενα</h5>
      <div *ngFor="let prerequisite of this.editPrerequisites let i=index">
        <div>
          <div class="form-group row">
            <label for="editPrerequisites" class="col-sm-2 col-form-label">Προαπαιτούμενο {{i+1}}</label>
            <div class="col-sm-9">
              <input type="text" required [(ngModel)]="this.editPrerequisites[i].name" [ngModelOptions]="{standalone: true}" class="form-control" id="editPrerequisite" list="editPrerequisites" autocomplete="off" value="{{this.selectedCourse.prerequisite[i].name}}">
              <datalist id="editPrerequisites">
                <option *ngFor="let dataCourse of this.courses">
                  <div *ngIf="dataCourse.name != this.selectedCourse.name && dataCourse.semester < this.selectedCourse.semester">
                    {{dataCourse.name}}
                  </div>
                </option>
              </datalist>
            </div>
            <div class="col-sm-1">
              <button type="button" class="btn btn-danger btn-circle" *ngIf="this.editPrerequisites.length > 1"
                      (click)="removeEditPrerequisite(i)"><i class="fa fa-times"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-sm-offset-2 col-sm-10">
          <div class="pull-left">
            <button class="btn btn-success" (click)="addEditPrerequisite()"><i class="fa fa-plus-circle"></i> Προσθήκη</button>
          </div>
        </div>
      </div>
    </div>

    <div>
      <h5 style="text-align: center; text-decoration: underline">Συνιστώμενα Προαπαιτουμενα</h5>
      <div *ngFor="let recommended of this.editRecommended let i=index">
        <div>
          <div class="form-group row">
            <label for="editRecommended" class="col-sm-2 col-form-label">Συνιστώμενο {{i+1}}</label>
            <div class="col-sm-9">
              <input type="text" required [(ngModel)]="this.editRecommended[i].name" [ngModelOptions]="{standalone: true}" class="form-control" id="editRecommended" list="editRecommendedList" autocomplete="off" value="{{this.selectedCourse.recommended[i].name}}">
              <datalist id="editRecommendedList">
                <option *ngFor="let dataCourse of this.courses">
                  <div *ngIf="dataCourse.name != this.selectedCourse.name && dataCourse.semester < this.selectedCourse.semester">
                    {{dataCourse.name}}
                  </div>
                </option>
              </datalist>
            </div>
            <div class="col-sm-1">
              <button type="button" class="btn btn-danger btn-circle" *ngIf="this.editRecommended.length > 1"
                      (click)="removeEditRecommended(i)"><i class="fa fa-times"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-sm-offset-2 col-sm-10">
          <div class="pull-left">
            <button class="btn btn-success" (click)="addEditRecommended()"><i class="fa fa-plus-circle"></i> Προσθήκη</button>
          </div>
        </div>
      </div>
    </div>
    <div class="form-group row">
      <div class="form-check">
        <label>
          <input type="checkbox" name="check" [(ngModel)]="selectedCourse.double_exam" [ngModelOptions]="{standalone: true}" [checked]="selectedCourse.double_exam"><span class="label-text">Διπλή Εξεταστική</span>
        </label>
      </div>
    </div>
    <div class="form-group row">
      <div class="form-check">
        <label>
          <input type="checkbox" name="check" [(ngModel)]="selectedCourse.offered" [ngModelOptions]="{standalone: true}" [checked]="selectedCourse.offered"><span class="label-text">Προσφερόμενο στο τρέχον έτος</span>
        </label>
      </div>
    </div>
  </form>
  <div class="row">
    <div class="col-sm-12">
      <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#delete">Διαγραφή</button>
      <button type="submit" class="btn btn-primary pull-right" (click)="editCourse()">Αποθήκευση</button>
      <button type="button" class="btn btn-secondary pull-right" (click)="cancelEditCourse()" routerLink="/admin">Ακύρωση</button>
    </div>
  </div>
  <!--The Modal-->
  <div class="modal fade" id="delete">
    <div class="modal-dialog modal-confirm">
      <div class="modal-content">
        <div class="modal-header">
          <div class="icon-box">
            <i class="material-icons">&times;</i>
          </div>
          <h4 class="modal-title">Διαγραφή</h4>
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        </div>
        <div class="modal-body">
          <p>Το μάθημα <span>{{this.selectedCourse.name}}</span> πρόκειται να διαγραφει!</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-info" data-dismiss="modal">Ακύρωση</button>
          <button type="button" class="btn btn-danger" (click)="deleteCourse(this.selectedCourse)"
                  data-dismiss="modal">Διαγραφή
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
